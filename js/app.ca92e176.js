(function(e){function t(t){for(var r,i,o=t[0],c=t[1],u=t[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},s=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"00b0":function(e,t,n){},"034f":function(e,t,n){"use strict";n("85ec")},"04dd":function(e,t,n){},"0e3e":function(e,t,n){},"14ba":function(e,t,n){"use strict";n("4dd9")},"20fb":function(e,t,n){},"28d1":function(e,t,n){},"4dd9":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("becf"),n("cabf"),n("3c76");var r,a,s,i,o=n("2b0e"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flexible-content"},[n("mdb-modal",{directives:[{name:"show",rawName:"v-show",value:!e.is_connected,expression:"!is_connected"}],staticStyle:{cursor:"pointer","z-index":"9999"},attrs:{size:"lg"},nativeOn:{click:function(t){return e.connect()}}},[n("mdb-modal-header",[n("mdb-modal-title",[e._v("Let's get started")])],1),e.has_serial?n("mdb-modal-body",[e._v("Click anywhere to connect to your badge via USB")]):n("mdb-modal-body",[e._v("It appears your browser does not support WebSerial. Make sure to use Chrome (at least v89).")])],1),n("div",{staticClass:"sidebar-fixed position-fixed"},[e._m(0),n("mdb-list-group",{staticClass:"list-group-flush"},[n("router-link",{attrs:{to:"/apps"},nativeOn:{click:function(t){e.activeItem=1}}},[n("mdb-list-group-item",{class:1===e.activeItem&&"active",attrs:{action:!0}},[n("mdb-icon",{staticClass:"mr-3",attrs:{icon:"table"}}),e._v("Apps")],1)],1),n("router-link",{attrs:{to:"/programming"},nativeOn:{click:function(t){e.activeItem=2}}},[n("mdb-list-group-item",{class:2===e.activeItem&&"active",attrs:{action:!0}},[n("mdb-icon",{staticClass:"mr-3",staticStyle:{width:"16px","text-align":"center"},attrs:{icon:"i-cursor"}}),e._v("Programming & Files")],1)],1),n("router-link",{attrs:{to:"/update"},nativeOn:{click:function(t){e.activeItem=3}}},[n("mdb-list-group-item",{class:3===e.activeItem&&"active",attrs:{action:!0}},[n("mdb-icon",{staticClass:"mr-3",staticStyle:{width:"16px","text-align":"center"},attrs:{icon:"bolt"}}),e._v("Update")],1)],1),n("router-link",{attrs:{to:"/settings"},nativeOn:{click:function(t){e.activeItem=4}}},[n("mdb-list-group-item",{class:4===e.activeItem&&"active",attrs:{action:!0}},[n("mdb-icon",{staticClass:"mr-3",attrs:{icon:"cog"}}),e._v("Settings")],1)],1)],1)],1),n("div",{staticClass:"container"},[n("div",{staticClass:"placement"},e._l(e.messages,(function(t){return n("mdb-toast-notification",{key:t.id,attrs:{title:t.title,message:t.message,icon:t.icon,iconColor:t.color,show:e.show}})})),1)]),n("main",[n("div",{staticClass:"p-5"},[n("router-view",{on:{genNotification:e.onNotification}})],1),n("ftr",{staticClass:"text-center font-small darken-2",attrs:{color:"primary-color-dark"}},[n("div",{staticClass:"pb-4 pt-4"},[n("a",{attrs:{href:"https://twitter.com/hackzonenl"}},[n("mdb-icon",{staticClass:"mr-3",attrs:{fab:"",icon:"twitter"}})],1),n("a",{attrs:{href:"https://www.youtube.com/watch?v=G0mEW8f2vac"}},[n("mdb-icon",{staticClass:"mr-3",attrs:{fab:"",icon:"youtube"}})],1),n("a",{attrs:{href:"https://github.com/hackzone"}},[n("mdb-icon",{staticClass:"mr-3",attrs:{fab:"",icon:"github"}})],1)])])],1)],1)},u=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{staticClass:"logo-wrapper"},[r("img",{staticClass:"img-fluid",attrs:{alt:"",src:n("9751")}})])}],l=(n("a434"),n("91c9")),d=(n("99af"),n("4160"),n("c975"),n("a15b"),n("fb6a"),n("ace4"),n("d3b7"),n("ac1f"),n("8a79"),n("1276"),n("2ca0"),n("498a"),n("1e25"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("159b"),n("96cf"),n("b85c")),p=n("1da1"),f=n("d4ec"),m=n("bee2"),h=(n("1157"),n("c4e3")),b=n("56e7"),g={opened:!1},v=function(){function e(){Object(f["a"])(this,e),this.container=""}return Object(m["a"])(e,[{key:"transform",value:function(e,t){void 0!==a&&a(e),this.container+=e;var n=this.container.split(">>> ");this.container=n.pop(),n.forEach((function(e){return t.enqueue(e)}))}},{key:"flush",value:function(e){e.enqueue(this.container)}}]),e}();function _(e){return new Promise((function(t){return setTimeout(t,e)}))}function x(e){return e.startsWith("/flash")?e.slice("/flash".length):e}function w(e){return k.apply(this,arguments)}function k(){return k=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=!(o.length>1&&void 0!==o[1])||o[1],"string"==typeof t){e.next=4;break}return console.debug("Can't call transceive on non-text data"),e.abrupt("return");case 4:return n&&!t.endsWith("\r\n")&&(t=t.trimEnd()+"\r\n"),e.next=7,i.write(t);case 7:return e.next=9,s.read();case 9:return r=e.sent,a=r.value,r.done,0==a.indexOf(t)&&(a=a.slice(t.length)),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function y(){return O.apply(this,arguments)}function O(){return O=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.setSignals({requestToSend:!0,dataTerminalReady:!1});case 2:return e.next=4,_(100);case 4:return e.next=6,r.setSignals({requestToSend:!1,dataTerminalReady:!1});case 6:return e.next=8,_(1e3);case 8:return e.next=10,w("\r\n");case 10:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function R(e){return C.apply(this,arguments)}function C(){return C=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,s,i,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=x(t),console.log("Fetching",t),void 0!==t&&""!==t||(t="/"),e.next=5,w("from upysh import ls; ls('".concat(t,"')"));case 5:n=e.sent,r=n.trimEnd().split("\n"),a=[""!==t?t:"/"],s=Object(d["a"])(r),e.prev=9,s.s();case 11:if((i=s.n()).done){e.next=20;break}if(o=i.value,o=o.trim(),""!==o){e.next=16;break}return e.abrupt("continue",18);case 16:c=o.startsWith("<dir>"),a.push((c?"d":"f")+o.split(" ")[1]);case 18:e.next=11;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](9),s.e(e.t0);case 25:return e.prev=25,s.f(),e.finish(25);case 28:return e.abrupt("return",a.join("\n"));case 29:case"end":return e.stop()}}),e,null,[[9,22,25,28]])}))),C.apply(this,arguments)}function j(e){return S.apply(this,arguments)}function S(){return S=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return!(r.length>1&&void 0!==r[1])||r[1],t=x(t),e.next=4,w("from upysh import cat; cat('".concat(t,"')"));case 4:return n=e.sent,e.abrupt("return",n.replaceAll("\r\n","\n"));case 6:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function T(e){return A.apply(this,arguments)}function A(){return A=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=x(t),e.next=3,w("f=open('".concat(t,"', 'w'); f.close()"));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function U(e){return E.apply(this,arguments)}function E(){return E=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=x(t),e.next=3,R(t);case 3:n=e.sent,r=n.split("\n"),r.unshift(),console.log(r),a=1;case 8:if(!(a<r.length)){e.next=20;break}if(s=r[a],"d"!=s.charAt(0)){e.next=15;break}return e.next=13,U(t+"/"+s.substr(1));case 13:e.next=17;break;case 15:return e.next=17,B(t+"/"+s.substr(1));case 17:a++,e.next=8;break;case 20:return e.next=22,B(t);case 22:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function I(e){return z.apply(this,arguments)}function z(){return z=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,s,i,o,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:void 0,void 0===n&&(n=new h),t=x(t),e.next=5,R(t);case 5:r=e.sent,a=r.split("\n"),a.unshift(),console.log(a),s=1;case 10:if(!(s<a.length)){e.next=24;break}if(i=a[s],"d"!=i.charAt(0)){e.next=17;break}return e.next=15,I(t+"/"+i.substr(1),n.folder(i.substr(1)));case 15:e.next=21;break;case 17:return e.next=19,j(t+"/"+i.substr(1));case 19:o=e.sent,n.file(i.substr(1),o);case 21:s++,e.next=10;break;case 24:return e.abrupt("return",n);case 25:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function B(e){return e=x(e),w("from upysh import rm; rm('".concat(e,"')"))}function F(e){return e=x(e),e.startsWith("/flash")&&(e=e.slice("/flash".length)),w("__import__('".concat(e,"')"))}function P(e,t){return e=x(e),t=x(t),w("from upysh import mv; mv('".concat(e,"', '").concat(t,"')"))}function M(e,t){e=x(e);var n=t.replaceAll("\r","\\r").replaceAll("\n","\\n").replaceAll("'","\\'");return w("f=open('".concat(e,"', 'wt')\r\nf.write('").concat(n,"')\r\nf.close()"),!1)}function N(e,t){e=x(e);var n=new Uint8Array(t),r=Object(b["a"])(n);return w("import binascii\r\nf=open('".concat(e,"', 'wb')\r\nf.write(binascii.a2b_base64('").concat(r,"'))\r\nf.close()"),!1)}function D(e){return e=x(e),w("from upysh import mkdir; mkdir('".concat(e,"')"))}function L(e){a=e}function H(e){return w(e,!1)}var V=[];function q(){if(void 0!==g&&g.opened){var e,t=Object(d["a"])(V);try{for(t.s();!(e=t.n()).done;){var n=e.value;n()}}catch(r){t.e(r)}finally{t.f()}V=[]}}function G(){return new Promise((function(e){return V.push(e)}))}function J(){return W.apply(this,arguments)}function W(){return W=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,navigator.serial.requestPort();case 2:return r=e.sent,e.next=5,r.open({baudRate:115200});case 5:return s=r.readable.pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream(new v)).getReader(),t=new TextEncoderStream,t.readable.pipeTo(r.writable),n=t.writable,i=n.getWriter(),window.reader=s,e.next=13,y();case 13:g.opened=!0;case 14:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}setInterval(q,500),window.transceive=w;var Y=void 0;setInterval((function(){Y.is_connected=void 0!==g&&g.opened}),1e3),setInterval((function(){for(var e=[],t=0;t<Y.messages.length;t++)Y.messages[t].lifetime--,Y.messages[t].lifetime<=0&&e.unshift(t);for(var n=0;n<e.length;n++)Y.messages.splice(e[n],1)}),100);var Z={name:"AdminTemplate",components:{mdbModal:l["mdbModal"],mdbModalHeader:l["mdbModalHeader"],mdbModalTitle:l["mdbModalTitle"],mdbModalBody:l["mdbModalBody"],mdbListGroup:l["mdbListGroup"],mdbListGroupItem:l["mdbListGroupItem"],mdbIcon:l["mdbIcon"],mdbToastNotification:l["mdbToastNotification"],ftr:l["mdbFooter"]},methods:{connect:J,onNotification:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"elegant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,s={id:Y.message_id,title:t,message:e,icon:n,color:r,lifetime:a};Y.message_id++,Y.messages.push(s)}},data:function(){return{show:!0,message_id:1,messages:[],activeItem:1,is_connected:void 0!==g&&g.opened}},beforeMount:function(){Y=this,this.activeItem=this.$route.matched[0].props.default.page,this.has_serial=!!navigator.serial},mixins:[l["waves"]]},X=Z,Q=(n("034f"),n("5c7b"),n("2877")),K=Object(Q["a"])(X,c,u,!1,null,"2f5ed21b",null),$=K.exports,ee=n("8c4f"),te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"apps"}},[e.installing?n("mdb-modal",{staticStyle:{cursor:"pointer","z-index":"9999"},attrs:{size:"lg"}},[n("mdb-modal-body",[e._v(" Currently writing: "+e._s(e.installing_file)+" "),n("mdb-progress",{attrs:{height:20},model:{value:e.installing_progress,callback:function(t){e.installing_progress=t},expression:"installing_progress"}})],1)],1):e._e(),n("mdb-row",[n("mdb-col",{attrs:{md:"12"}},[n("mdb-card",{staticClass:"mb-4"},[n("mdb-card-header",[e._v("Install apps from app store")]),n("mdb-card-body",[n("mdb-row",[n("mdb-col",{attrs:{sm:"6",md:"3"}},[n("span",[e._v("Filter category")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selected_store_category,expression:"selected_store_category"}],staticClass:"browser-default custom-select",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selected_store_category=t.target.multiple?n:n[0]}}},e._l(e.categories,(function(t){return n("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])})),0)]),n("mdb-col",{attrs:{sm:"6",md:"3"}},[n("span",[e._v("Filter development state")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selected_store_state,expression:"selected_store_state"}],staticClass:"browser-default custom-select",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selected_store_state=t.target.multiple?n:n[0]}}},e._l(e.states,(function(t){return n("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])})),0)]),n("mdb-col",{attrs:{sm:"6"}},[n("span",[e._v("Apps uploaded to hatchery.badge.team will automatically show up here for everyone. Be sure to upload yours! :)")])])],1),n("mdb-tbl",{staticClass:"table-striped"},[n("thead",[n("tr",[n("th",[e._v("App name")]),n("th",[e._v("Description")]),n("th",[e._v("Category")]),n("th",[e._v("State")]),n("th",[e._v("Author")]),n("th",[e._v("Revision")]),n("th",[e._v("Install")])])]),n("tbody",e._l(e.filtered_store_apps,(function(t){return n("tr",{key:t.slug},[n("th",{attrs:{scope:"row"}},[e._v(e._s(t.name))]),n("td",[e._v(e._s(t.description))]),n("td",[e._v(e._s(t.category))]),n("td",[e._v(e._s(t.status))]),n("td",[e._v(e._s(t.author||"Unknown"))]),n("td",[e._v(e._s(t.revision))]),n("td",[-1===e.local_apps.indexOf(t.slug)?n("mdb-btn",{class:{disabled:e.installing},attrs:{color:"primary",size:"sm"},on:{click:function(n){return e.install_app(t.slug)}}},[e._v("Install")]):n("mdb-btn",{attrs:{color:"red",size:"sm"},on:{click:function(n){return e.uninstall_app(t.slug)}}},[e._v("Uninstall")])],1)])})),0)])],1)],1)],1)],1)],1)},ne=[],re=(n("4de4"),n("b0c0"),n("b64b"),n("25f0"),n("ddb0"),n("3835")),ae=n("5530"),se=n("9ce6"),ie=n.n(se),oe=(n("c345"),n("d7ac")),ce=n("632e");window.pako=oe,window.untar=ce,window.VueMarkdown=ie.a;var ue=void 0,le={name:"Apps",components:{mdbRow:l["mdbRow"],mdbCol:l["mdbCol"],mdbBtn:l["mdbBtn"],mdbTbl:l["mdbTbl"],mdbProgress:l["mdbProgress"],mdbModal:l["mdbModal"],mdbModalBody:l["mdbModalBody"],mdbCard:l["mdbCard"],mdbCardBody:l["mdbCardBody"],mdbCardHeader:l["mdbCardHeader"]},beforeMount:function(){ue=this,Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:return e.next=4,transceive("import consts;print(consts.INFO_HARDWARE_WOEZEL_NAME)");case 4:return ue.repo_name=e.sent.trim(),e.next=7,j("/flash/config/system-launcher_items.json");case 7:t=e.sent;try{n=JSON.parse(t)}catch(r){n={}}return ue.launcher_items=n,e.next=12,ue.update_local_apps();case 12:fetch("https://hatchery.badge.team/basket/"+ue.repo_name+"/list/json",{mode:"cors"}).then((function(e){e.json().then((function(e){ue.store_apps=e;var t,n=Object(d["a"])(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;-1===ue.categories.indexOf(r.category)&&ue.categories.push(r.category),-1===ue.states.indexOf(r.status)&&ue.states.push(r.status)}}catch(a){n.e(a)}finally{n.f()}}))}));case 13:case"end":return e.stop()}}),e)})))()},methods:{update_local_apps:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,s,i,o,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=["/flash/apps"],n=[],r=0,a=t;case 3:if(!(r<a.length)){e.next=30;break}return s=a[r],e.next=7,R(s);case 7:i=e.sent,o=i.split("\n"),c=Object(d["a"])(o),e.prev=10,c.s();case 12:if((u=c.n()).done){e.next=19;break}if(l=u.value,"d"===l[0]){e.next=16;break}return e.abrupt("continue",17);case 16:n.push(l.substr(1));case 17:e.next=12;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](10),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:r++,e.next=3;break;case 30:ue.local_apps=n;case 31:case"end":return e.stop()}}),e,null,[[10,21,24,27]])})));function t(){return e.apply(this,arguments)}return t}(),get_local_app_metadata:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"/flash/apps/",e.next=3,j(n+t+"/metadata.json");case 3:r=e.sent;try{a=JSON.parse(r)}catch(i){a={}}return e.abrupt("return",Object(ae["a"])(Object(ae["a"])({},a),{},{slug:t}));case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),get_app_metadata:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="https://badge.team/eggs/get/"+t+"/json",e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.json();case 6:return a=e.sent,s=Object.keys(a.releases).sort(),i=s[s.length-1],a["latest_release_url"]=a.releases[i][0]["url"],e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),install_app:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,s,i,o,c,u,l,p,f,m,h,b,g,v,_,x,w,k,y,O,R,C=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=C.length>1&&void 0!==C[1]&&C[1],r=C.length>2&&void 0!==C[2]?C[2]:"/flash/apps/",ue.installing_file="",ue.installing_progress=0,ue.installing=!0,e.prev=5,e.next=8,ue.get_app_metadata(t);case 8:return a=e.sent,e.next=11,fetch(a.latest_release_url);case 11:return s=e.sent,e.next=14,s.arrayBuffer();case 14:return i=e.sent,o=oe["inflate"](i),e.next=18,ce(o.buffer);case 18:c=e.sent,u=[],l=Object(d["a"])(c);try{for(l.s();!(p=l.n()).done;)for(f=p.value,m=f.name.split("/"),m.pop(),h=1;h<=m.length;h++)u.push(r+m.slice(0,h).join("/"))}catch(j){l.e(j)}finally{l.f()}if(n){e.next=42;break}b=u.filter((function(e,t,n){return n.indexOf(e)===t})),g=Object(d["a"])(b),e.prev=25,g.s();case 27:if((v=g.n()).done){e.next=34;break}return _=v.value,console.info("Creating folder",_),e.next=32,D(_);case 32:e.next=27;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e["catch"](25),g.e(e.t0);case 39:return e.prev=39,g.f(),e.finish(39);case 42:x=Object(d["a"])(c.entries()),e.prev=43,x.s();case 45:if((w=x.n()).done){e.next=55;break}return k=Object(re["a"])(w.value,2),y=k[0],O=k[1],R=r+O.name,console.info("Writing file",R),ue.installing_file=R,ue.installing_progress=Math.floor(y/(c.length-1)*100),e.next=53,N(R,O.buffer);case 53:e.next=45;break;case 55:e.next=60;break;case 57:e.prev=57,e.t1=e["catch"](43),x.e(e.t1);case 60:return e.prev=60,x.f(),e.finish(60);case 63:if(!n){e.next=69;break}return e.next=66,ue.get_local_app_metadata(t,r);case 66:ue.current_app=e.sent,e.next=70;break;case 69:ue.local_apps.push(t);case 70:ue.$emit("genNotification","Installed "+a.name+" successfully"),e.next=84;break;case 73:return e.prev=73,e.t2=e["catch"](5),e.prev=75,e.next=78,U(r+t);case 78:e.next=83;break;case 80:e.prev=80,e.t3=e["catch"](75),console.error("Error removing app dir for "+t,e.t3);case 83:ue.$emit("genNotification","Failed to install "+t+". Please try again.");case 84:return e.prev=84,ue.installing=!1,e.finish(84);case 87:case"end":return e.stop()}}),e,null,[[5,73,84,87],[25,36,39,42],[43,57,60,63],[75,80]])})));function t(t){return e.apply(this,arguments)}return t}(),uninstall_app:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"/flash/apps/",e.prev=1,e.next=4,U(n+t);case 4:ue.$emit("genNotification","Uninstalled "+t+" successfully"),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),ue.$emit("genNotification","Uninstalled "+t+" not successfully","exclamation");case 10:ue.update_local_apps();case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));function t(t){return e.apply(this,arguments)}return t}(),buttonClick:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=parseInt(t.target.id),ue.current_index=n,n in ue.launcher_items){e.next=7;break}ue.current_app=void 0,ue.current_app_slug="none",e.next=13;break;case 7:return r=ue.launcher_items[n.toString()],ue.color_picker=ue.current_colour=r.colour,ue.current_app_slug=r.slug,e.next=12,ue.get_local_app_metadata(r.slug);case 12:ue.current_app=e.sent;case 13:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),update_current_colour:function(e){clearTimeout(ue.timeout_colorpicker),ue.timeout_colorpicker=setTimeout((function(){ue.current_colour=e.hex,ue.update_current_launcher_item()}),800)},update_current_launcher_item:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=ue.current_index,n=ue.current_app_slug,"none"!==n){e.next=6;break}delete ue.launcher_items[t.toString()],e.next=11;break;case 6:return e.next=8,ue.get_local_app_metadata(n);case 8:r=e.sent,ue.current_app=r,ue.launcher_items[t.toString()]={slug:n,name:r.name,colour:ue.current_colour};case 11:return e.next=13,M("/flash/config/system-launcher_items.json",JSON.stringify(ue.launcher_items));case 13:ue.$emit("genNotification","Updated homescreen");case 14:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),pageinc:function(){ue.current_page+=1},pagedec:function(){ue.current_page>0&&(ue.current_page-=1)}},data:function(){return{timeout_colorpicker:null,current_page:0,current_index:-1,current_app:void 0,current_app_slug:void 0,current_colour:"#4A90E2",launcher_items:{},local_apps:[],store_apps:[],selected_store_category:"all",selected_store_state:"working",categories:["all"],states:["working","all"],installing:!1,installing_file:"",installing_progress:0,color_picker:"007F7F"}},computed:{filtered_store_apps:function(){return"all"===ue.selected_store_category&&"all"===ue.selected_store_state?ue.store_apps:ue.store_apps.filter((function(e){return("all"===ue.selected_store_category||e.category===ue.selected_store_category)&&("all"===ue.selected_store_state||e.status===ue.selected_store_state)}))}}},de=le,pe=(n("5eb6"),Object(Q["a"])(de,te,ne,!1,null,"54553338",null)),fe=pe.exports,me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"programming"}},[n("mdb-card",{staticClass:"mb-4",attrs:{ondrop:"itemDrop"}},[n("mdb-card-body",[n("section",[n("mdb-row",[n("mdb-col",{attrs:{sm:"6",md:"4",lg:"3"}},[n("mdb-btn",{attrs:{color:"gray",size:"lg",title:"Make folder",icon:"folder-plus"},on:{click:function(t){return e.mkdir_ui()}}}),n("mdb-btn",{attrs:{color:"gray",size:"lg",title:"Make file",icon:"file"},on:{click:function(t){return e.mkfile_ui()}}}),n("mdb-btn",{attrs:{color:"gray",size:"lg",title:"Rename file",icon:"file-alt"},on:{click:function(t){return e.rename_ui()}}}),n("mdb-btn",{attrs:{color:"gray",size:"lg",title:"Delete file",icon:"trash"},on:{click:function(t){return e.trash_ui()}}}),n("mdb-btn",{attrs:{color:"gray",size:"lg",title:"Download folder",icon:"download"},on:{click:function(t){return e.download_ui()}}})],1),n("mdb-col",{attrs:{sm:"2",md:"2",lg:"2"}},[n("mdb-btn",{attrs:{color:"gray",size:"lg",title:"Run file",icon:"play"},on:{click:function(t){return e.runfile_ui()}}}),n("mdb-btn",{attrs:{color:"gray",size:"lg",title:"Save file",icon:"save"},on:{click:function(t){return e.save_ui()}}})],1),n("mdb-col",{staticClass:"mt-2",attrs:{sm:"4",md:"6",lg:"7"}},[n("mdb-input",{attrs:{label:"Filename",size:"md"},model:{value:e.editorfilename,callback:function(t){e.editorfilename=t},expression:"editorfilename"}})],1)],1),n("mdb-row",{staticClass:"mt-3"},[n("mdb-col",{attrs:{sm:"6",md:"4",lg:"3"}},[n("v-jstree",{attrs:{data:e.files,draggable:"",multiple:"","allow-batch":"","whole-row":""},on:{"item-click":e.itemClick,"item-toggle":e.itemToggle,"item-drop-before":e.itemDrop,"item-drop":e.otherDrop,"item-drag-start":e.itemDragStart}})],1),n("mdb-col",{attrs:{sm:"6",md:"8",lg:"9"}},[n("editor",{attrs:{lang:"python",theme:"monokai",height:"500"},model:{value:e.content_editor,callback:function(t){e.content_editor=t},expression:"content_editor"}})],1)],1)],1)])],1),n("mdb-card",{staticClass:"mb-4"},[n("mdb-card-body",[n("section",[e._v(" Python terminal "),n("div",{staticClass:"md-form"},[n("Terminal",{ref:"terminal",on:{data:e.commandpython}})],1)])])],1)],1)},he=[],be=(n("5319"),n("d3c8")),ge=n.n(be),ve=(n("061c"),n("8882"),n("14d4"),n("7c9e")),_e=n("21a6"),xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xterm"})},we=[],ke=n("fcf3"),ye=n("47d0"),Oe=(n("abb2"),{data:function(){return{terminal:null,fitAddon:null,charCount:0}},mounted:function(){var e=this;this.terminal=new ke["Terminal"]({convertEol:!0}),this.fitAddon=new ye["FitAddon"],this.terminal.loadAddon(this.fitAddon),this.terminal.open(this.$el),this.terminal.write(">>> "),this.fitAddon.fit(),window.addEventListener("resize",this.handleResize),this.terminal.onData((function(t){e.$emit("data",t)}))},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize),this.terminal.dispose()},methods:{handleResize:function(e){this.fitAddon.fit()},handleLog:function(e){console.log("handleLog"),this.terminal.write(e.replace("\n","\r\n"))}}}),Re=Oe,Ce=Object(Q["a"])(Re,xe,we,!1,null,null,null),je=Ce.exports;window.itemDrop=function(){console.log("nope")};var Se=void 0,Te={model:{}},Ae=void 0,Ue=["txt","csv","json","py","ini","info","md","log","conf","cfg"];function Ee(e){Se&&Se.$refs&&Se.$refs.terminal&&Se.$refs.terminal.handleLog(e)}var Ie,ze={name:"Programming",components:{mdbBtn:l["mdbBtn"],mdbRow:l["mdbRow"],mdbCol:l["mdbCol"],mdbCard:l["mdbCard"],mdbCardBody:l["mdbCardBody"],mdbInput:l["mdbInput"],VJstree:ge.a,editor:ve,Terminal:je},beforeMount:function(){var e=this;Se=this,L(Ee),G().then(Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,transceive("from upysh import *");case 2:e.itemClick({model:e.files[0]});case 3:case"end":return t.stop()}}),t)}))))},methods:{parseDir:function(e){var t=e.split("\n");console.log(t);for(var n=[],r="/"===t[0]?"":t[0],a=1;a<t.length;a++){var s="d"===t[a].charAt(0),i={};i["text"]=t[a].substr(1),i["full_path"]=r+"/"+i["text"],s?("dflash"===t[a]?i["icon"]="fas fa-microchip":"dsdcard"===t[a]?i["icon"]="fas fa-sd-card":i["icon"]="far fa-folder",i["is_dir"]=!0,i["dragDisabled"]=!0):i["icon"]="far fa-file",i["opened"]=!1,i["disabled"]=!1,i["selected"]=!1,s&&(i["children"]=[{text:"Click parent to refresh",icon:"none",isDummy:!0}]),n.push(i)}return n},updateNode:function(e){var t=e.model;if(e.model.is_dir)console.log("Updating: "+e.model.full_path),R(t.full_path).then((function(e){for(var n=Se.parseDir(e),r=0;r<n.length;r++){var a,s=Object(d["a"])(t.children);try{for(s.s();!(a=s.n()).done;){var i=a.value;i.full_path===n[r].full_path&&(n[r]=i)}}catch(o){s.e(o)}finally{s.f()}}console.log(n),t.children=n,t.opened=!0}));else{var n=e.model.full_path.split(".");n.length>1&&Ue.indexOf(n[n.length-1].toLowerCase())>=0&&(Se.content_editor===Se.content_original||window.confirm("Unsaved changes will be lost. Are you sure?"))&&j(e.model.full_path).then((function(t){Se.content_editor=t,Se.content_original=t,Se.editorfilename=e.model.full_path,Se.$emit("genNotification","Load success","Load success","check","green",30)}))}},itemClick:function(e){Te.model.selected=!1,e.model.selected=!0,Te=e,Se.updateNode(e)},itemToggle:function(e){e.data.is_dir&&e.data.children.length&&e.data.children[0].isDummy&&e.data.opened&&!0!==e.data.isToggled&&(e.data.isToggled=!0,Se.updateNode(e))},otherDrop:function(e,t,n,r){},itemDrop:function(e,t,n,r){if(void 0==n)(function(){console.log("file upload"),console.log(r);for(var t=e.model.is_dir?e:e.$parent,n=t.model.full_path,a=function(e){var a=r.dataTransfer.files[e],s=new FileReader;s.onload=function(i){console.log(s.result),N(n+"/"+a.name,s.result),e==r.dataTransfer.files.length&&Se.updateNode(t)},console.log(a),s.readAsArrayBuffer(a)},s=0;s<r.dataTransfer.files.length;s++)a(s)})();else{if(console.log("drop"),console.log(e),n.is_dir)return;var a=e.model.is_dir?e:e.$parent,s=a.model.full_path,i=n.full_path,o=s+"/"+n.text;P(i,o),Se.updateNode(Ae),Se.updateNode(a)}},itemDragStart:function(e,t,n){var r=e.model.is_dir?e:e.$parent;console.log("Start:"),console.log(r),Ae=r},trash_ui:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Te.model.full_path,!confirm("Delete: "+t+"?")){e.next=13;break}if(!Te.model.is_dir){e.next=8;break}return e.next=5,U(t);case 5:t==Se.editorfilename.substr(0,t.length)&&(Se.editorfilename="/flash/cache/scratch.py",Se.content_editor="",Se.content_original=""),e.next=12;break;case 8:B(t),Se.editorfilename="/flash/cache/scratch.py",Se.content_editor="",Se.content_original="";case 12:Se.itemClick(Te.$parent);case 13:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),download_ui:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Te.model.is_dir){e.next=8;break}return t=Te.model.full_path,e.next=4,I(t);case 4:n=e.sent,n.generateAsync({type:"blob"}).then((function(e){Object(_e["saveAs"])(e,"download.zip"),Se.$emit("genNotification","Download succes","Download succes","check","green",30)})),e.next=9;break;case 8:Se.$emit("genNotification","Can only download folder","Download failed","times","red",30);case 9:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),save_ui:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Se.editorfilename.split("."),!(t.length>1&&Ue.indexOf(t[t.length-1].toLowerCase())>=0||window.confirm("File: "+Se.editorfilename+" has not a textfile extension"))){e.next=7;break}return e.next=4,M(Se.editorfilename,Se.content_editor);case 4:Se.content_original=Se.content_editor,Se.updateNode(Te.$parent),Se.$emit("genNotification","Save succes","Save succes","check","green",30);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),rename_ui:function(){if(!Te.model.is_dir){var e=Te.model.full_path,t=Te.$parent.model.full_path,n=prompt("Please enter new filename","");null!=n&&(P(e,t+"/"+n),e===Se.editorfilename&&(Se.editorfilename=t+"/"+n),Se.itemClick(Te.$parent))}},mkdir_ui:function(){var e=prompt("Please enter new directory name",""),t=Te.model.is_dir?Te:Te.$parent,n=t.model.full_path;e&&(D(n+"/"+e),Se.itemClick(t))},mkfile_ui:function(){var e=prompt("Please enter new filename",""),t=Te.model.is_dir?Te:Te.$parent,n=t.model.full_path;e&&(T(n+"/"+e),Se.itemClick(t))},runfile_ui:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Se.content_editor===Se.content_original){e.next=4;break}return e.next=3,M(Se.editorfilename,Se.content_editor);case 3:Se.content_original=Se.content_editor;case 4:t=Se.editorfilename.replace("/flash/","/").replace("/__init__.py","").replace(".py",""),t.length>1&&"/"===t[0]&&(t=t.substr(1)),t=t.replace("/","."),F(t);case 8:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),info:function(){},commandpython:function(e){H(e)},connect:J},data:function(){return{content_editor:"",content_original:"",editorfilename:"/flash/cache/scratch.py",show:!0,files:[{text:"flash",full_path:"/flash",icon:"fas fa-microchip",is_dir:!0,children:[{text:"Click parent to refresh",icon:"none",isDummy:!0}]}]}}},Be=ze,Fe=(n("a2cd"),n("ca0b"),Object(Q["a"])(Be,me,he,!1,null,"02ec5e3c",null)),Pe=Fe.exports,Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"apps"}},[n("mdb-row",[n("mdb-col",{attrs:{md:"12"}},[n("mdb-card",{staticClass:"mb-4"},[n("mdb-card-header",[e._v("Update your badge firmware")]),n("mdb-card-body",[e._v(" Your badge is running firmware version: "+e._s(e.checking_badge?"Checking...":e.badge_firmware_version)),n("br"),n("br"),e._v(" Latest available on the server: "+e._s(e.checking_server?"Checking...":e.server_firmware_version)),n("br"),n("br"),e._v(" Make sure you configure your WiFi on the Settings page first. Pressing the update button will reboot the badge. If WiFi can't connect, the LEDs will remain off. Update progress is shown with green LEDs. It's safe to disconnect the badge before and during updating, but try to do that only if the screen remains off for 30+ seconds."),n("br"),n("br"),n("mdb-btn",{attrs:{color:"primary",size:"sm"},on:{click:e.update}},[e._v("Update over WiFi")])],1)],1)],1)],1)],1)},Ne=[],De=void 0,Le={name:"Update",components:{mdbRow:l["mdbRow"],mdbCol:l["mdbCol"],mdbBtn:l["mdbBtn"],mdbCard:l["mdbCard"],mdbCardBody:l["mdbCardBody"],mdbCardHeader:l["mdbCardHeader"]},beforeMount:function(){De=this;var e="";G().then(Object(p["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,transceive("import consts;print(consts.INFO_HARDWARE_WOEZEL_NAME)");case 2:return e=t.sent.trim(),t.next=5,transceive("import consts; consts.INFO_FIRMWARE_BUILD");case 5:n=t.sent,De.badge_firmware_version=parseInt(n),De.checking_badge=!1,fetch("https://ota.badge.team/version/"+e+".txt",{mode:"cors"}).then((function(e){e.json().then((function(e){De.server_firmware_version=e.build,De.server_firmware_name=e.name,De.checking_server=!1}))}));case 9:case"end":return t.stop()}}),t)}))))},methods:{update:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:H("system.ota()\r\n");case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},data:function(){return{badge_firmware_version:0,badge_firmware_name:"",server_firmware_version:0,server_firmware_name:"",checking_badge:!0,checking_server:!0}},computed:{filtered_store_apps:function(){return"all"===De.selected_store_category&&"all"===De.selected_store_state?De.store_apps:De.store_apps.filter((function(e){return("all"===De.selected_store_category||e.category===De.selected_store_category)&&("all"===De.selected_store_state||e.status===De.selected_store_state)}))}}},He=Le,Ve=(n("14ba"),Object(Q["a"])(He,Me,Ne,!1,null,"6c01b301",null)),qe=Ve.exports,Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"settings"}},[n("mdb-row",[n("mdb-col",{attrs:{sm:"12",xl:"6"}},[n("mdb-card",{staticClass:"mt-4"},[n("mdb-card-header",[e._v("WiFi Settings")]),n("mdb-card-body",[n("form",[n("div",{staticClass:"grey-text"},[n("mdb-input",{attrs:{label:"Access Point name (SSID)",icon:"wifi",type:"email"},model:{value:e.wifi_ssid,callback:function(t){e.wifi_ssid=t},expression:"wifi_ssid"}}),n("mdb-input",{attrs:{label:"Password",icon:"lock",type:"password"},model:{value:e.wifi_password,callback:function(t){e.wifi_password=t},expression:"wifi_password"}})],1)]),n("mdb-btn",{attrs:{color:"primary"},on:{click:e.save_wifi}},[e._v("Save")])],1)],1)],1),e._l(e.app_slugs,(function(t){return n("mdb-col",{key:t,attrs:{sm:"12",xl:"6"}},[n("mdb-card",{staticClass:"mt-4"},[n("mdb-card-header",[e._v("App - "+e._s(t))]),n("mdb-card-body",[n("vue-json-editor",{attrs:{"show-btns":!1,expandedOnStart:!0},on:{"json-change":e.onJsonChange},model:{value:e.configs[t],callback:function(n){e.$set(e.configs,t,n)},expression:"configs[app_slug]"}}),n("mdb-btn",{attrs:{color:"primary"},on:{click:function(n){return e.save_app(t)}}},[e._v("Save")])],1)],1)],1)}))],2)],1)},Je=[],We=n("45a3"),Ye={name:"Settings",beforeMount:function(){var e=this;Ie=this,G().then((function(){return e.update_local_apps()}))},components:{mdbRow:l["mdbRow"],mdbCol:l["mdbCol"],mdbBtn:l["mdbBtn"],mdbInput:l["mdbInput"],mdbCard:l["mdbCard"],mdbCardHeader:l["mdbCardHeader"],mdbCardBody:l["mdbCardBody"],vueJsonEditor:We["a"]},methods:{update_local_apps:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,s,i,o,c,u,l,p,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=["/flash/apps"],n=[],r=0,a=t;case 3:if(!(r<a.length)){e.next=42;break}return s=a[r],e.next=7,R(s);case 7:i=e.sent,o=i.split("\n"),c=Object(d["a"])(o),e.prev=10,c.s();case 12:if((u=c.n()).done){e.next=31;break}if(l=u.value,"d"===l[0]){e.next=16;break}return e.abrupt("continue",29);case 16:return p=l.substr(1),f=void 0,e.prev=18,e.next=21,j("/flash/config/app-"+p+".json");case 21:if(f=e.sent,void 0!==f&&f.length){n.push(p);try{Ie.configs[p]=JSON.parse(f)}catch(m){Ie.configs[p]={}}}e.next=29;break;case 25:e.prev=25,e.t0=e["catch"](18),1;case 29:e.next=12;break;case 31:e.next=36;break;case 33:e.prev=33,e.t1=e["catch"](10),c.e(e.t1);case 36:return e.prev=36,c.f(),e.finish(36);case 39:r++,e.next=3;break;case 42:Ie.app_slugs=n;case 43:case"end":return e.stop()}}),e,null,[[10,33,36,39],[18,25]])})));function t(){return e.apply(this,arguments)}return t}(),save_wifi:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H('import machine, system;machine.nvs_setstr("system", "wifi.ssid", "'+Ie.wifi_ssid+'");machine.nvs_setstr("system", "wifi.password", "'+Ie.wifi_password+'");\r\n');case 2:Ie.$emit("genNotification","WiFi settings updated successfully");case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),save_audio:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H('import machine, system;machine.nvs_setint("system", "volume", '+Ie.volume+")\r\n");case 2:Ie.$emit("genNotification","Audio settings updated successfully");case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),save_app:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,M("/flash/config/app-"+t+".json",JSON.stringify(Ie.configs[t]));case 2:Ie.$emit("genNotification","App settings updated successfully");case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),onJsonChange:function(){}},data:function(){return{wifi_ssid:"",wifi_password:"",app_slugs:[],configs:{},volume:255}}},Ze=Ye,Xe=(n("e6c5"),Object(Q["a"])(Ze,Ge,Je,!1,null,"06063799",null)),Qe=Xe.exports,Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"apps"}},[n("mdb-row",[n("mdb-col",{attrs:{md:"12"}},[n("mdb-card",{staticClass:"mb-4"},[n("mdb-card-header",[e._v("Update your badge firmware")]),n("mdb-card-body",[e._v(" This is an experimental page that you can use to recover the firmware on your Pixel. "+e._s(e.status)+" "),n("mdb-btn",{attrs:{color:"primary",size:"sm"},on:{click:e.recover}},[e._v("Recover your Pixel Badge")])],1)],1)],1)],1)],1)},$e=[],et=(n("d81d"),n("4d90"),{sha2017:{name:"SHA2017",flashsize:16,baudrate:115200,flash:[{filename:"bootloader.bin",address:4096,name:"bootloader"},{filename:"hackerhotel2019_16MB.bin",address:32768,name:"partition table"},{filename:"ota_data_initial.bin",address:53248,name:"OTA data"},{filename:"sha2017.bin",address:65536,name:"firmware"}]},pixel:{name:"Pixel Badge",flashsize:4,baudrate:115200,flash:[{filename:"bootloader.bin",address:4096,name:"bootloader"},{filename:"pixelv1_4MB.bin",address:32768,name:"partition table"},{filename:"ota_data_initial.bin",address:53248,name:"OTA data"},{filename:"firmware.bin",address:65536,name:"firmware"}]}}),tt=(n("cb29"),n("a630"),n("caad"),n("2532"),n("3ca3"),n("466d"),n("262e")),nt=n("2caf"),rt=n("2909"),at=[];var st=512,it=1024,ot=4096,ct=zt(" UUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUU"),ut=33382,lt=50,dt=12882,pt=353510656,ft=401408,mt=1280,ht=2,bt=3,gt=4,vt=5,_t=6,xt=7,wt=8,kt=10,yt=208,Ot=11,Rt=15,Ct=239,jt=5,St=2048,Tt=3e3,At=6e5,Ut=2*At,Et=3e4,It=50;function zt(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<=255&&t.push(r)}return t}var Bt=function(){function e(t,n,r,a,s){Object(f["a"])(this,e),this._chipfamily=null,this._efuses=new Array(4).fill(0),this._flashsize=1024*a*1024,this.flashsize=a,this.debug=!1,this.IS_STUB=!1,this.logFunc=t,this.errorFunc=n,this.port=r,this.writeToStream=s,console.log("Flash size:",a)}return Object(m["a"])(e,[{key:"slipEncode",value:function(e){var t,n=[],r=Object(d["a"])(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;219==a?n=n.concat([219,221]):192==a?n=n.concat([219,220]):n.push(a)}}catch(s){r.e(s)}finally{r.f()}return n}},{key:"macAddr",value:function(){var e,t=new Array(6).fill(0),n=this._efuses[0],r=this._efuses[1],a=this._efuses[2],s=this._efuses[3];if(this._chipfamily==ut){if(0!=s)e=[s>>16&255,s>>8&255,255&s];else if(0==(r>>16&255))e=[24,254,52];else{if(1!=(r>>16&255))throw"Couldnt determine OUI";e=[172,208,116]}t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=r>>8&255,t[4]=255&r,t[5]=n>>24&255}else if(this._chipfamily==lt)t[0]=a>>8&255,t[1]=255&a,t[2]=r>>24&255,t[3]=r>>16&255,t[4]=r>>8&255,t[5]=255&r;else{if(this._chipfamily!=dt)throw"Unknown chip family";t[0]=a>>8&255,t[1]=255&a,t[2]=r>>24&255,t[3]=r>>16&255,t[4]=r>>8&255,t[5]=255&r}return t}},{key:"_readEfuses",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this._chipfamily!=ut){e.next=4;break}t=1072693328,e.next=13;break;case 4:if(this._chipfamily!=lt){e.next=8;break}t=1610719232,e.next=13;break;case 8:if(this._chipfamily!=dt){e.next=12;break}t=1610719232,e.next=13;break;case 12:throw"Don't know what chip this is";case 13:n=0;case 14:if(!(n<4)){e.next=21;break}return e.next=17,this.readRegister(t+4*n);case 17:this._efuses[n]=e.sent;case 18:n++,e.next=14;break;case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"readRegister",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.pack("I",t),e.next=3,this.checkCommand(kt,n);case 3:return r=e.sent[0],e.abrupt("return",this.unpack("I",r)[0]);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"chipType",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==this._chipfamily){e.next=17;break}return e.next=3,this.readRegister(1610612856);case 3:if(t=e.sent,t!=pt){e.next=8;break}this._chipfamily=lt,e.next=17;break;case 8:if(t!=ft){e.next=12;break}this._chipfamily=ut,e.next=17;break;case 12:if(t!=mt){e.next=16;break}this._chipfamily=dt,e.next=17;break;case 16:throw"Unknown Chip.";case 17:return e.abrupt("return",this._chipfamily);case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"chipName",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.chipType();case 2:return e.next=4,this._readEfuses();case 4:return e.next=6,this.chipType();case 6:if(e.t0=e.sent,e.t1=lt,e.t0!=e.t1){e.next=10;break}return e.abrupt("return","ESP32");case 10:return e.next=12,this.chipType();case 12:if(e.t2=e.sent,e.t3=dt,e.t2!=e.t3){e.next=16;break}return e.abrupt("return","ESP32-S2");case 16:return e.next=18,this.chipType();case 18:if(e.t4=e.sent,e.t5=ut,e.t4!=e.t5){e.next=24;break}if(!(16&this._efuses[0]||65536&this._efuses[2])){e.next=23;break}return e.abrupt("return","ESP8285");case 23:return e.abrupt("return","ESP8266EX");case 24:return e.abrupt("return",null);case 25:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"checkCommand",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,s,i,o,c,u,l,d=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:0,a=d.length>3&&void 0!==d[3]?d[3]:Tt,a=Math.min(a,Ut),e.next=5,this.sendCommand(t,n,r);case 5:return e.next=7,this.getResponse(t,a);case 7:if(s=e.sent,i=Object(re["a"])(s,2),o=i[0],c=i[1],null!==c&&(this.IS_STUB||this._chipfamily==ut?u=2:[lt,dt].includes(this._chipfamily)?u=4:[2,4].includes(c.length)&&(u=c.length)),!(null===c||c.length<u)){e.next=14;break}throw"Didn't get enough status bytes";case 14:if(l=c.slice(-u,c.length),c=c.slice(0,-u),1!=l[0]){e.next=23;break}if(l[1]!=jt){e.next=21;break}throw"Invalid (unsupported) command "+this.toHex(t);case 21:throw console.error("Full response: ",l),"Command failure error code "+this.toHex(l[1]);case 23:return e.abrupt("return",[o,c]);case 24:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"timeoutPerMb",value:function(e,t){var n=Math.floor(e*(t/486));return n<Tt?Tt:n}},{key:"sendCommand",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:0,at=[],a=[192,0],a.push(t),a=a.concat(this.pack("H",n.length)),a=a.concat(this.slipEncode(this.pack("I",r))),a=a.concat(this.slipEncode(n)),a.push(192),e.next=10,this.writeToStream(a);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getResponse",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,s,i,o,c,u,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=l.length>1&&void 0!==l[1]?l[1]:Tt,r=[],a=0,s=!1,i=Date.now();case 5:if(!(Date.now()-i<n)){e.next=21;break}if(!(at.length>0)){e.next=11;break}o=at.shift(),219==o?s=!0:s?(221==o?r.push(220):220==o?r.push(192):r=r.concat([219,o]),s=!1):r.push(o),e.next=13;break;case 11:return e.next=13,this.sleep(10);case 13:if(r.length>0&&192!=r[0]&&r.shift(),r.length>1&&1!=r[1]&&r.shift(),r.length>2&&r[2]!=t&&r.shift(),r.length>4&&(a=r[3]+(r[4]<<8)),r.length!=a+10){e.next=19;break}return e.abrupt("break",21);case 19:e.next=5;break;case 21:if(r.length==a+10){e.next=24;break}return this.logFunc("Timed out after "+n+" milliseconds"),e.abrupt("return",[null,null]);case 24:return c=r.slice(5,9),u=r.slice(9,-1),e.abrupt("return",[c,u]);case 27:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"readBuffer",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,s,i,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=o.length>0&&void 0!==o[0]?o[0]:Tt,n=[],0,r=!1,a=Date.now();case 5:if(!(Date.now()-a<t)){e.next=18;break}if(!(at.length>0)){e.next=11;break}s=at.shift(),219==s?r=!0:r?(221==s?n.push(220):220==s?n.push(192):n=n.concat([219,s]),r=!1):n.push(s),e.next=13;break;case 11:return e.next=13,this.sleep(10);case 13:if(n.length>0&&192!=n[0]&&n.shift(),!(n.length>1&&192==n[n.length-1])){e.next=16;break}return e.abrupt("break",18);case 16:e.next=5;break;case 18:if(!(n.length<2)){e.next=21;break}return this.logFunc("Timed out after "+t+" milliseconds"),e.abrupt("return",null);case 21:return i=n.slice(1,-1),e.abrupt("return",i);case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"checksum",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ct,r=Object(d["a"])(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n^=a}}catch(s){r.e(s)}finally{r.f()}return n}},{key:"getChromeVersion",value:function(){var e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return!!e&&parseInt(e[2],10)}},{key:"setBaudrate",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._chipfamily==ut&&this.logFunc("Baud rate can only change on ESP32 and ESP32-S2"),n=this.pack("<II",t,0),e.next=4,this.checkCommand(Rt,n);case 4:return this.getChromeVersion()<86?this.port.baudrate=t:this.port.baudRate=t,e.next=7,this.sleep(100);case 7:return e.next=9,this.checkCommand(Rt,n);case 9:this.logFunc("Changed baud rate to "+t);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"pack",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=0,s=t.slice(1);if(r.replace(/[<>]/,"").length==s.length){for(var i=[],o=!0,c=0;c<r.length;c++)"<"==r[c]?o=!0:">"==r[c]?o=!1:"B"==r[c]?(u(s[a],1),a++):"H"==r[c]?(u(s[a],2),a++):"I"==r[c]?(u(s[a],4),a++):this.errorFunc("Unhandled character in pack format");return i}function u(e,t){for(var n=0;n<t;n++)o?i.push(e>>8*n&255):i.push(e>>8*(t-n)&255)}this.errorFunc("Pack format to Argument count mismatch")}},{key:"unpack",value:function(e,t){var n,r=0,a=[],s=Object(d["a"])(e);try{for(s.s();!(n=s.n()).done;){var i=n.value;"B"==i?(a.push(255&t[r]),r+=1):"H"==i?(a.push(255&t[r]|(255&t[r+1])<<8),r+=2):"I"==i?(a.push(255&t[r]|(255&t[r+1])<<8|(255&t[r+2])<<16|(255&t[r+3])<<24),r+=4):this.errorFunc("Unhandled character in unpack format")}}catch(o){s.e(o)}finally{s.f()}return a}},{key:"sync",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<5)){e.next=14;break}return e.next=4,this._sync();case 4:if(n=e.sent,!n){e.next=9;break}return e.next=8,this.sleep(100);case 8:return e.abrupt("return",!0);case 9:return e.next=11,this.sleep(100);case 11:t++,e.next=1;break;case 14:throw"Couldn't sync to ESP. Try resetting.";case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_sync",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<4)){e.next=34;break}return console.log("Issue reset..."),e.next=5,this.port.setSignals({dataTerminalReady:!1,requestToSend:!0});case 5:return e.next=7,new Promise((function(e){return setTimeout(e,1200)}));case 7:return e.next=9,this.port.setSignals({dataTerminalReady:!0,requestToSend:!1});case 9:return e.next=11,new Promise((function(e){return setTimeout(e,450)}));case 11:return e.next=13,this.port.setSignals({dataTerminalReady:!1});case 13:n=0;case 14:if(!(n<8)){e.next=30;break}return e.next=17,this.sendCommand(wt,ct);case 17:return e.next=19,this.getResponse(wt,100);case 19:if(r=e.sent,a=Object(re["a"])(r,2),a[0],s=a[1],null!==s){e.next=25;break}return e.abrupt("continue",27);case 25:if(!(s.length>1&&0==s[0]&&0==s[1])){e.next=27;break}return e.abrupt("return",!0);case 27:n++,e.next=14;break;case 30:this.logFunc("ESP not responding, trying again...");case 31:t++,e.next=1;break;case 34:return e.abrupt("return",!1);case 35:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getFlashWriteSize",value:function(){return this._chipfamily==dt?it:st}},{key:"flashData",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,s,i,o,c,u,l,d,p=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:0,r=p.length>2?p[2]:void 0,a=t.byteLength,this.logFunc("Writing data with filesize: "+a),e.next=6,this.flashBegin(a,n);case 6:s=e.sent,this.logFunc("Blocks: "+s),i=[],o=0,0,n,c=0,u=Date.now(),l=this.getFlashWriteSize();case 15:if(!(a-c>0)){e.next=27;break}return d=Math.floor(100*(o+1)/s),r(d),a-c>=l?i=Array.from(new Uint8Array(t,c,l)):(i=Array.from(new Uint8Array(t,c,a-c)),i=i.concat(new Array(l-i.length).fill(255))),this.logFunc("Flashing block: "+o),e.next=22,this.flashBlock(i,o,2e3);case 22:o+=1,i.length,c+=l,e.next=15;break;case 27:this.logFunc("Took "+(Date.now()-u)+"ms to write "+a+" bytes");case 28:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"flashBlock",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,n){var r,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:100,e.next=3,this.checkCommand(bt,this.pack("<IIII",t.length,n,0,0).concat(t),this.checksum(t),r);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"toHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"0x"+e.toString(16).toUpperCase().padStart(t,"0")}},{key:"flashBegin",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,s,i,o,c,u,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:0,n=l.length>1&&void 0!==l[1]?l[1]:0,r=l.length>2&&void 0!==l[2]&&l[2],i=this.getFlashWriteSize(),this._chipfamily!=lt){e.next=8;break}return s=this.pack("<IIIIII",0,this._flashsize,65536,4096,256,65535),e.next=8,this.checkCommand(Ot,s);case 8:return o=Math.floor((t+i-1)/i),a=this._chipfamily==ut?this.getEraseSize(n,t):t,c=this.IS_STUB?Tt:this.timeoutPerMb(Et,t),u=Date.now(),s=this.pack("<IIII",a,o,i,n),this._chipfamily==dt&&(s=s.concat(this.pack("<I",r?1:0))),this.logFunc("Erase size "+a+", blocks "+o+", block size "+i+", offset "+this.toHex(n,4)+", encrypted "+(r?"yes":"no")),e.next=17,this.checkCommand(ht,s,0,c);case 17:return 0==t||this.IS_STUB||this.logFunc("Took "+(Date.now()-u)+"ms to erase "+o+" bytes"),e.abrupt("return",o);case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"flashFinish",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.pack("<I",1),e.next=3,this.checkCommand(gt,t);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getEraseSize",value:function(e,t){var n=16,r=ot,a=Math.floor((t+r-1)/r),s=Math.floor(e/r),i=n-s%n;return a<i&&(i=a),a<2*i?Math.floor((a+1)/2*r):(a-i)*r}},{key:"memBegin",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var s,i,o,c,u,l,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.IS_STUB){e.next=16;break}return e.next=3,this.getStubCode();case 3:s=e.sent,i=a,o=a+t,console.log(i,o),console.log(s.data_start,s.data.length,s.text_start,s.text.length),c=0,u=[[s.data_start,s.data_start+s.data.length],[s.text_start,s.text_start+s.text.length]];case 9:if(!(c<u.length)){e.next=16;break}if(l=Object(re["a"])(u[c],2),d=l[0],p=l[1],!(i<p&&o>d)){e.next=13;break}throw"Software loader is resident at "+this.toHex(d,8)+"-"+this.toHex(p,8)+". Can't load binary at overlapping address range "+this.toHex(i,8)+"-"+this.toHex(o,8)+". Try changing the binary loading address.";case 13:c++,e.next=9;break;case 16:return e.abrupt("return",this.checkCommand(vt,this.pack("<IIII",t,n,r,a)));case 17:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"memBlock",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.checkCommand(xt,this.pack("<IIII",t.length,n,0,0).concat(t),this.checksum(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"memFinish",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:0,n=this.IS_STUB?Tt:It,r=this.pack("<II",parseInt(0==t),t),e.prev=3,e.next=6,this.checkCommand(_t,r,0,n);case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e["catch"](3),this.IS_STUB;case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getStubCode",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("assets/stubs/"+this.getStubFile()+".json");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,n.text=zt(atob(n.text)),n.data=zt(atob(n.data)),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getStubFile",value:function(){return this._chipfamily==lt?"esp32":this._chipfamily==dt?"esp32s2":this._chipfamily==ut?"esp8266":void 0}},{key:"runStub",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,s,i,o,c,u,l,p,f,m,h,b=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=b.length>0&&void 0!==b[0]?b[0]:null,null!==t){e.next=5;break}return e.next=4,this.getStubCode();case 4:t=e.sent;case 5:n=St,this.logFunc("Uploading stub..."),r=0,a=["text","data"];case 8:if(!(r<a.length)){e.next=39;break}if(s=a[r],!Object.keys(t).includes(s)){e.next=36;break}return i=t[s+"_start"],o=t[s].length,c=Math.floor((o+n-1)/n),e.next=16,this.memBegin(o,c,n,i);case 16:u=Object(d["a"])(Array(c).keys()),e.prev=17,u.s();case 19:if((l=u.n()).done){e.next=28;break}return p=l.value,f=p*n,m=f+n,m>o&&(m=o),e.next=26,this.memBlock(t[s].slice(f,m),p);case 26:e.next=19;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e["catch"](17),u.e(e.t0);case 33:return e.prev=33,u.f(),e.finish(33);case 36:r++,e.next=8;break;case 39:return this.logFunc("Running stub..."),e.next=42,this.memFinish(t["entry"]);case 42:return e.next=44,this.readBuffer(100);case 44:if(h=e.sent,h=String.fromCharCode.apply(String,Object(rt["a"])(h)),"OHAI"==h){e.next=48;break}throw"Failed to start stub. Unexpected response: "+h;case 48:return this.logFunc("Stub is now running..."),e.abrupt("return",new Ft(this.logFunc,this.errorFunc,this.port,this.flashsize,this.writeToStream));case 50:case"end":return e.stop()}}),e,this,[[17,30,33,36]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"sleep",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}}]),e}(),Ft=function(e){Object(tt["a"])(n,e);var t=Object(nt["a"])(n);function n(e,r,a,s,i){var o;return Object(f["a"])(this,n),o=t.call(this,e,r,a,s,i),o.IS_STUB=!0,o}return Object(m["a"])(n,[{key:"eraseFlash",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.checkCommand(yt,[],0,At);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(Bt),Pt=void 0,Mt=void 0,Nt={name:"Recover",components:{mdbRow:l["mdbRow"],mdbCol:l["mdbCol"],mdbBtn:l["mdbBtn"],mdbCard:l["mdbCard"],mdbCardBody:l["mdbCardBody"],mdbCardHeader:l["mdbCardHeader"]},beforeMount:function(){Mt=this},methods:{render:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Mt.status=t;case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getData:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new Request("assets/firmware/pixel"+t),e.next=3,fetch(n);case 3:return r=e.sent,e.abrupt("return",r.arrayBuffer());case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),toHex:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"0x"+e.toString(16).toUpperCase().padStart(t,"0")},showProgress:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Mt.render("Writing "+e.name+" to "+Mt.toHex(e.address)+"... ("+t+"%)")},readLoop:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!s){e.next=12;break}return e.next=3,s.read();case 3:if(t=e.sent,n=t.value,r=t.done,!r){e.next=9;break}return s.releaseLock(),e.abrupt("break",12);case 9:addInput(n),e.next=0;break;case 12:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),recover:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,a,s,o,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=et["pixel"],Mt.readLoop().catch((function(e){Mt.render(Pt.templates.disconnected,e)})),a=new Bt(Mt.render,(function(e){return Mt.render("Error: "+e)}),r,n.flashsize,(function(e){return i.write(e)})),Mt.render("Connecting to the badge..."),e.prev=4,e.next=7,a.sync();case 7:if(!e.sent){e.next=27;break}if(n.baudrate==ESP_ROM_BAUD){e.next=12;break}return Mt.render("Changing baudrate..."),e.next=12,a.setBaudrate(n.baudrate);case 12:return e.t0=Mt,e.next=15,a.chipName();case 15:return e.t1=e.sent,e.t2="Connected to "+e.t1,e.t3=e.t2+" (",e.t4=a.macAddr().map((function(e){return e.toString(16).toUpperCase().padStart(2,"0")})).join(":"),e.t5=e.t3+e.t4,e.t6=e.t5+"), loading stub...",e.t0.render.call(e.t0,e.t6),e.next=24,a.runStub();case 24:s=e.sent,e.next=28;break;case 27:Mt.render("Failed to connect.");case 28:e.next=34;break;case 30:return e.prev=30,e.t7=e["catch"](4),Mt.render(e.t7),e.abrupt("return");case 34:e.prev=34,o=n.flash,c=0;case 37:if(!(c<o.length)){e.next=49;break}return u=o[c],Mt.render("Downloading "+u.name+"..."),e.next=42,Mt.getData(u.filename);case 42:return l=e.sent,Mt.showProgress(u),e.next=46,s.flashData(l,u.address,Mt.showProgress.bind(Pt,u));case 46:c++,e.next=37;break;case 49:Mt.render("Done."),e.next=56;break;case 52:e.prev=52,e.t8=e["catch"](34),console.error(e.t8),Mt.render(e.t8);case 56:case"end":return e.stop()}}),e,null,[[4,30],[34,52]])})));function t(t){return e.apply(this,arguments)}return t}()},data:function(){return{status:""}},computed:{filtered_store_apps:function(){return"all"===Mt.selected_store_category&&"all"===Mt.selected_store_state?Mt.store_apps:Mt.store_apps.filter((function(e){return("all"===Mt.selected_store_category||e.category===Mt.selected_store_category)&&("all"===Mt.selected_store_state||e.status===Mt.selected_store_state)}))}}},Dt=Nt,Lt=(n("b537"),Object(Q["a"])(Dt,Ke,$e,!1,null,"fcc6a412",null)),Ht=Lt.exports,Vt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{attrs:{id:"bad-gateway"}},[r("div",{staticClass:"full"},[r("mdb-row",{staticClass:"bad-gateway-row"},[r("mdb-col",{attrs:{md:"8"}},[r("img",{staticClass:"img-fluid",attrs:{alt:"Error 404",hieght:"20px",src:n("5d8e")}}),r("h2",{staticClass:"h2-responsive mt-3 mb-2"},[e._v("404. That's an error.")]),r("h4",[e._v("The requested URL was not found on this server.")])]),r("mdb-col",{attrs:{md:"4"}},[r("img",{staticClass:"img-fluid",attrs:{alt:"Error 404",src:"https://mdbootstrap.com/img/Others/grafika404-bf.png"}})])],1)],1)])},qt=[],Gt={name:"BadGateway",components:{mdbRow:l["mdbRow"],mdbCol:l["mdbCol"]},data:function(){return{}}},Jt=Gt,Wt=(n("6d6b"),Object(Q["a"])(Jt,Vt,qt,!1,null,"7bb7c836",null)),Yt=Wt.exports;o["a"].use(ee["a"]);var Zt=new ee["a"]({mode:"hash",routes:[{path:"/apps",name:"Apps",component:fe,props:{page:1},alias:"/"},{path:"/programming",name:"Programming & Files",props:{page:2},component:Pe},{path:"/update",name:"Update",props:{page:3},component:qe},{path:"/settings",name:"Settings",props:{page:4},component:Qe},{path:"/recover",name:"Recover",props:{page:5},component:Ht},{path:"/404",name:"BadGateway",props:{page:6},component:Yt},{path:"*",props:{page:6},redirect:"/404"}]}),Xt=n("2f62");o["a"].use(Xt["a"]);var Qt=new Xt["a"].Store({state:{},mutations:{},actions:{}}),Kt=n("755e");o["a"].use(Kt,{load:{libraries:"places"}}),o["a"].config.productionTip=!1,new o["a"]({router:Zt,store:Qt,render:function(e){return e($)}}).$mount("#app")},"5c7b":function(e,t,n){"use strict";n("68af")},"5d8e":function(e,t){e.exports="data:image/png;base64,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"},"5eb6":function(e,t,n){"use strict";n("20fb")},"68af":function(e,t,n){},"68b6":function(e,t,n){},"6d6b":function(e,t,n){"use strict";n("68b6")},"85ec":function(e,t,n){},9751:function(e,t,n){e.exports=n.p+"img/cs_logo_round.f13dd54e.png"},a2cd:function(e,t,n){"use strict";n("04dd")},b537:function(e,t,n){"use strict";n("28d1")},ca0b:function(e,t,n){"use strict";n("00b0")},e6c5:function(e,t,n){"use strict";n("0e3e")}});
//# sourceMappingURL=app.ca92e176.js.map